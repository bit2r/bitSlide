{
  "hash": "8b7bea5fa6e18e3404c48b4a6ff5d7f8",
  "result": {
    "markdown": "##  {auto-animate=\"true\"}\n\n::: {style=\"margin-top: 100px; color: black\"}\n데이터 과학 문제\n:::\n\n##  {auto-animate=\"true\"}\n\n::: {style=\"margin-top: 300px; font-size: 5em; color: black;\"}\n데이터 과학 문제\n:::\n\n## 데이터 사이언스 - 출판\n\n::: panel-tabset\n### 문제점\n\n![문제점](fig/single-sourcing-problem.jpg){#fig-problem width=\"50%\"}\n\n### 개념\n\n![Single Sourcing 개념](fig/single-sourcing-concept.jpg){#fig-concept width=\"50%\"}\n\n### Single Sourcing Multi-Use\n\n![Single Sourcing Multi-Use](fig/single-sourcing-publishing.jpg){#fig-publishing width=\"60%\"}\n:::\n\n## 복잡성\n\n::: panel-tabset\n### 엑셀 [^problem-1]\n\n<br>\n\n<center>![](fig/xkcd-algorithms.png){width=\"1000\"}</center>\n\n### 아래한글 [^problem-2]\n\n<center>![](fig/markdown-writing.png)</center>\n\n### 럼스펠트 지식 행렬\n\n<center>![[@martin2011beyond]](fig/rumsfeld-matrix.png)</center>\n\n:::\n\n[^problem-1]: [XKCD 1667: Algorithms](https://www.explainxkcd.com/wiki/index.php/1667:_Algorithms)\n\n[^problem-2]: [Writing Technical Papers with Markdown and Pandoc](https://blog.kdheepak.com/writing-papers-with-markdown.html)\n\n\n## 파이프 & 필터\n\n::: panel-tabset\n### 유닉스 쉘\n\n![](fig/redirects-and-pipes.png)\n- [파이프와 필터](http://aispiration.com/shell-novice-kr/04-pipefilter/index.html)\n\n### 그래프 문법\n\n![](fig/ggplot-pipe-and-filter.png)\n\n- [그래프 문법 실무](https://aispiration.com/viz/viz-ggplot2-practice.html)\n\n### 표 문법\n\n![](fig/gt_parts_of_a_table.svg)\n- [한국 R 컨퍼런스 - 발표자 사진 포함](http://aispiration.com/data-science/ds-rconf-profile.html)\n\n### 애니메이션 문법\n\n- [데이터 과학자의 시각화 - 정적 그래프를 넘어 데항해 시대로 (2018/10/19)](http://aispiration.com/ds-authoring/ds_data_scientist_visualization.html#26)\n- [gganimate Talks](https://gganimate.com/articles/extra/talks.html)\n\n<center>\n![](fig/gganimate-logo.png)\n</center>\n\n\n\n\n### 3D 시각화\n\n![](fig/rayshader-smallhobart.gif)\n- [rayshader](https://www.rayshader.com/)\n\n:::\n\n## 시각화 - 그래프 문법 [^problem-3]\n\n[^problem-3]: Comparing ggplot2 and R Base Graphics By [Nathan Yau](https://flowingdata.com/2016/03/22/comparing-ggplot2-and-r-base-graphics/)\n\n::: panel-tabset\n<!-- 데이터  -->\n\n::: columns\n::: column\n### R 코드\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tibble' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'dplyr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.1     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nbill_df <- data.frame(\n  sex = factor(c(\"여성\",\"여성\",\"남성\",\"남성\")),\n  time = factor(c(\"점심\",\"저녁\",\"점심\",\"저녁\"), levels=c(\"점심\",\"저녁\")),\n  total_bill = c(13.53, 16.81, 16.24, 17.42)\n)\n```\n:::\n\n:::\n\n::: column\n### 실행결과\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbill_df\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   sex time total_bill\n1 여성 점심      13.53\n2 여성 저녁      16.81\n3 남성 점심      16.24\n4 남성 저녁      17.42\n```\n:::\n:::\n\n:::\n:::\n\n<!-- ggplot -->\n\n::: columns\n::: column\n### R 코드\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbill_df %>% \n  ggplot(aes(x=time, y=total_bill, group=sex, shape=sex, colour=sex)) +\n    geom_line(aes(linetype=sex), size=1) +    \n    geom_point(size=3, fill=\"white\") +        \n    expand_limits(y=0) +                      \n    scale_colour_hue(name=\"결재자 성별\", l=30) +\n    scale_shape_manual(name=\"결재자 성별\", values=c(22,21)) +\n    scale_linetype_discrete(name=\"결재자 성별\") +\n    xlab(\"점심, 석식\") + ylab(\"팁(Tip)\") +\n    ggtitle(\"식사 결재 평균 팁\") +    \n    theme_bw() +\n    theme(legend.position=c(.7, .4))\n```\n:::\n\n:::\n\n::: column\n### 실행결과\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](problem_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n:::\n:::\n\n<!-- Base R -->\n\n::: columns\n::: column\n### R 코드\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbill_mat <- matrix( bill_df$total_bill,\n                   nrow = 2,\n                   byrow=TRUE,\n                   dimnames = list(c(\"여성\", \"남성\"), c(\"점심\", \"저녁\"))\n                   )\n\nmf_col <- c(\"#3CC3BD\", \"#FD8210\")\nbarplot(bill_mat, beside = TRUE, border=NA, col=mf_col)\nlegend(\"topleft\", row.names(bill_mat), pch=15, col=mf_col)\n\n\npar(cex=1.2, cex.axis=1.1)\nmatplot(bill_mat, type=\"b\", lty=1, pch=19, col=mf_col,\n    cex=1.5, lwd=3, las=1, bty=\"n\", xaxt=\"n\",\n    xlim=c(0.7, 2.2), ylim=c(12,18), ylab=\"\",\n    main=\"식사 결재 평균 팁\", yaxt=\"n\")\naxis(2, at=axTicks(2), labels=sprintf(\"$%s\", axTicks(2)),\n    las=1, cex.axis=0.8, col=NA, line = -0.5)\ngrid(NA, NULL, lty=3, lwd=1, col=\"#000000\")\nabline(v=c(1,2), lty=3, lwd=1, col=\"#000000\")\nmtext(\"점심\", side=1, at=1)\nmtext(\"저녁\", side=1, at=2)\ntext(1.5, 17.3, \"남성\", srt=8, font=3)\ntext(1.5, 15.1, \"여성\", srt=33, font=3)\n```\n:::\n\n:::\n\n::: column\n### 실행결과\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](problem_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n:::\n:::\n:::\n\n## 디자인 - 코드\n\n::: panel-tabset\n### 데이터 가공\n\n> 날짜와 시간별로 총 빈도수와 출발연착 평균 시간을 구한다. 단, 총빈도수가 10 회 미만인 것은 제외하고 출발연착 시간의 결측값을 제거하고 계산한다.\n\n-   `flights` 데이터프레임에서\n-   출발 연착시간(`dep_delay`) 칼럼에서 결측값이 없는 (`!is.na()`) 행을 필터링 하고\n-   날짜별(`date`), 시간별(`hour`) 그룹을 묶어\n-   평균 출발 연착시간을 계산하고 총빈도수 총계를 내고\n-   총빈도수가 10회 이상인 날짜와 시간을 찾아내시오\n\n### `dplyr` R\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhourly_delay <- flights %>%  \n  filter(!is.na(dep_delay)) %>% \n  group_by(date, hour) %>% \n  summarise(delay = mean(dep_delay), n = n()) %>%  \n  filter(n > 10) \n```\n:::\n\n\n### Base R\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhourly_delay <- filter(   \n    summarise(   \n        group_by(   \n             filter(   \n                 flights,    \n                 !is.na(dep_delay)   \n             ),    \n             date, hour   \n        ),    \n    delay = mean(dep_delay),    \n         n = n()   \n    ),    \n    n > 10   \n)\n```\n:::\n\n\n### SQL\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT \"date\", \"hour\", \"delay\", \"n\"\nFROM (\n    SELECT \"date\", \"hour\",\n        AVG(\"dep_delay\") AS \"delay\",\n        COUNT() AS \"n\"\n    FROM \"flights\"\n    WHERE NOT(\"dep_delay\" IS NULL)\n    GROUP BY \"date\", \"hour\"\n) AS \"_W1\"\nWHERE \"n\" > 10.0\n```\n:::\n\n\n### 파이썬\n\n\n::: {.cell}\n\n```{.python .cell-code}\nflights[['date','hour','dep_delay']]\n...\n```\n:::\n\n:::\n\n## 디자인 - 데이터\n\n::: panel-tabset\n### 정돈된 데이터\n\n<center>![](fig/messy_tidy_data.png){width=\"1000\"}</center>\n\n### 사례 - 결핵 데이터\n\n-   WHO [결핵 원데이터](http://www.who.int/tb/country/data/download/en/)\n-   WHO 에서 년도별, 국가별, 연령별, 성별, 진단방법별 결핵 발병사례 조사 통계 데이터\n-   진단방법\n    -   `rel` stands for cases of relapse\n    -   `ep` stands for cases of extrapulmonary TB\n    -   `sn` stands for cases of pulmonary TB that could not be diagnosed by a pulmonary smear (smear negative)\n    -   `sp` stands for cases of pulmonary TB that could be diagnosed by a pulmonary smear (smear positive)\n-   연령\n    -   014 = 0 -- 14 years old\n    -   1524 = 15 -- 24 years old\n    -   2534 = 25 -- 34 years old\n    -   3544 = 35 -- 44 years old\n    -   4554 = 45 -- 54 years old\n    -   5564 = 55 -- 64 years old\n    -   65 = 65 or older\n-   성별\n    -   males (m)\n    -   females (f)\n\n### 사례 - Messy 데이터\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ntidyr::who \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 7,240 × 60\n   country  iso2  iso3   year new_sp_m014 new_sp_m1524 new_sp_m2534 new_sp_m3544\n   <chr>    <chr> <chr> <dbl>       <dbl>        <dbl>        <dbl>        <dbl>\n 1 Afghani… AF    AFG    1980          NA           NA           NA           NA\n 2 Afghani… AF    AFG    1981          NA           NA           NA           NA\n 3 Afghani… AF    AFG    1982          NA           NA           NA           NA\n 4 Afghani… AF    AFG    1983          NA           NA           NA           NA\n 5 Afghani… AF    AFG    1984          NA           NA           NA           NA\n 6 Afghani… AF    AFG    1985          NA           NA           NA           NA\n 7 Afghani… AF    AFG    1986          NA           NA           NA           NA\n 8 Afghani… AF    AFG    1987          NA           NA           NA           NA\n 9 Afghani… AF    AFG    1988          NA           NA           NA           NA\n10 Afghani… AF    AFG    1989          NA           NA           NA           NA\n# ℹ 7,230 more rows\n# ℹ 52 more variables: new_sp_m4554 <dbl>, new_sp_m5564 <dbl>,\n#   new_sp_m65 <dbl>, new_sp_f014 <dbl>, new_sp_f1524 <dbl>,\n#   new_sp_f2534 <dbl>, new_sp_f3544 <dbl>, new_sp_f4554 <dbl>,\n#   new_sp_f5564 <dbl>, new_sp_f65 <dbl>, new_sn_m014 <dbl>,\n#   new_sn_m1524 <dbl>, new_sn_m2534 <dbl>, new_sn_m3544 <dbl>,\n#   new_sn_m4554 <dbl>, new_sn_m5564 <dbl>, new_sn_m65 <dbl>, …\n```\n:::\n:::\n\n\n### 사례 - 코드\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwho %>%\n  pivot_longer(\n    cols = new_sp_m014:newrel_f65, \n    names_to = \"key\", \n    values_to = \"cases\", \n    values_drop_na = TRUE\n  ) %>% \n  mutate(\n    key = stringr::str_replace(key, \"newrel\", \"new_rel\")\n  ) %>%\n  separate(key, c(\"new\", \"var\", \"sexage\")) %>% \n  select(-new, -iso2, -iso3) %>% \n  separate(sexage, c(\"sex\", \"age\"), sep = 1)\n```\n:::\n\n\n### 사례 - Tidy 데이터\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 76,046 × 6\n   country      year var   sex   age   cases\n   <chr>       <dbl> <chr> <chr> <chr> <dbl>\n 1 Afghanistan  1997 sp    m     014       0\n 2 Afghanistan  1997 sp    m     1524     10\n 3 Afghanistan  1997 sp    m     2534      6\n 4 Afghanistan  1997 sp    m     3544      3\n 5 Afghanistan  1997 sp    m     4554      5\n 6 Afghanistan  1997 sp    m     5564      2\n 7 Afghanistan  1997 sp    m     65        0\n 8 Afghanistan  1997 sp    f     014       5\n 9 Afghanistan  1997 sp    f     1524     38\n10 Afghanistan  1997 sp    f     2534     36\n# ℹ 76,036 more rows\n```\n:::\n:::\n\n:::\n\n## 디자인 - 사람 대 기계\n\n::: panel-tabset\n### 전체 개발 시간\n\n<br>\n\n<center>![](fig/human-computer-total.png)</center>\n\n### 사람 `<` 기계\n\n<br>\n\n<center>![](fig/human-computer-machine.png)</center>\n\n### 사람 `>` 기계\n\n<br>\n\n<center>![](fig/human-computer-human.png)</center>\n:::\n",
    "supporting": [
      "problem_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}